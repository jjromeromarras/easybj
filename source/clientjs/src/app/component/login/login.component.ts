import { Component, OnInit, Renderer, ElementRef } from '@angular/core';
import { Language } from '../../model/organization/language';
import { UserSession } from '../../model/interfaz/usersession';
import { Config } from '../../services/config.service';
import { Login } from '../../model/application/login/login';
import { Router } from '@angular/router';

@Component(
    {
        selector: 'app-login',
        templateUrl: './login.component.html',
    }
)

export class LoginComponent {


    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PUBLIC FIELDS
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    public userName: string;
    public requiredField: string;
    public passwordStr: string;
    public currentTime: any;
    public login: Login;
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PRIVATE FIELDS
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    private session: UserSession;

    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // CONSTRUCTOR FIELDS
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    constructor(private config: Config, private element: ElementRef, private renderer: Renderer,
        private router: Router) {
        this.currentTime = new Date();
        this.login = new Login();
    }

    ngAfterViewInit() {
        this.setFocus();
    }

    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PRIVATE METHODS
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    private setFocus() {
        if (this.renderer != null && this.element != null && this.element.nativeElement != null) {
            this.renderer.invokeElementMethod(this.element.nativeElement.querySelector('input'), 'focus');
        }
    }

    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // HTML METHODS
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    onLogIn(isValid: boolean) {
        if (this.login.user !== '' && this.login.password !== '' && isValid) {
            this.router.navigate(['/easyb'], {
            });
        }
    }
}